{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/junyap/foodbank/client/src/Components/Map/index.tsx\",\n    _s = $RefreshSig$();\n\n// naming conventions of items in svg = id of group in camelCase, image import name in PascalCase.\n// svg tree generated from dev/svgParse.py (super hacky atm)\nimport React, { useEffect, useRef, useState } from 'react';\nimport './index.css';\nimport { Location } from '../../lib/types';\nimport svgData from './svgImageData.json';\nimport mapImg from './assets/TuckerMap.jpg';\nimport descData from './assets/description.json';\nimport Townbox from '../Townbox';\n\nconst Map = () => {\n  _s();\n\n  // Used because SVG does not scale properly without\n  const [height, setHeight] = useState(1);\n  const elementRef = useRef(null);\n  const [selected, onSelect] = useState(null);\n  const [scale, setScale] = useState(1);\n  const [display, changeDisplay] = useState(false); // const [townbox, setTownbox] = useState(<></>)\n\n  useEffect(() => {\n    var _elementRef$current;\n\n    if (elementRef === null || elementRef === void 0 ? void 0 : (_elementRef$current = elementRef.current) === null || _elementRef$current === void 0 ? void 0 : _elementRef$current.clientHeight) {\n      var _elementRef$current2;\n\n      setHeight(elementRef === null || elementRef === void 0 ? void 0 : (_elementRef$current2 = elementRef.current) === null || _elementRef$current2 === void 0 ? void 0 : _elementRef$current2.clientHeight);\n    }\n  }, []); //empty dependency array so it only runs once at render\n\n  useEffect(() => {\n    function handleResize() {\n      const mobileWidth = 2900;\n      const minStaticWidth = 1170;\n      const targetWidth = window.innerWidth > minStaticWidth ? window.innerWidth : mobileWidth;\n      setScale(targetWidth / 4961);\n    }\n\n    handleResize();\n    window.addEventListener('resize', handleResize);\n  }, []); // to get the area description given an area so you can actually use headers/captions\n  // returns null if such area doesn't exist in assets/description.json\n\n  const getAreaDescription = area => {\n    for (const description of descData.descriptionArray) {\n      if (description.id === Location[area]) {\n        return description;\n      }\n    }\n\n    return null;\n  };\n\n  const onClose = () => {\n    onSelect(null);\n    changeDisplay(false);\n  };\n\n  const onMapClick = area => {\n    selected === area ? onSelect(null) : onSelect(area);\n    changeDisplay(!display);\n  }; // eslint-disable-next-line\n\n\n  const handleClick = event => {\n    //need to change this type\n    event.preventDefault();\n    const area = event.target.alt;\n    onMapClick(Location[area]);\n  }; // Data can be made from dev/svgParse.py\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: elementRef,\n      className: \"block w-full min-h-full items-stretch\",\n      style: {\n        minHeight: '900px'\n      },\n      children: height === 0 ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"svgrow\",\n        children: [selected === null && /*#__PURE__*/_jsxDEV(\"img\", {\n          src: mapImg,\n          alt: \"Tucker Island Map\",\n          className: \"map\",\n          useMap: \"#tuckerislandmap\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 17\n        }, this), selected !== null && /*#__PURE__*/_jsxDEV(\"img\", {\n          src: mapImg,\n          alt: \"Tucker Island Map\",\n          className: \"map map-inactive\",\n          useMap: \"#tuckerislandmap\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"map\", {\n          name: \"tuckerislandmap\",\n          children: svgData.groupArray.map(location => {\n            if (location.coords) {\n              const scaledCoords = location.coords.map(coord => coord * scale);\n              console.log(location.xtrans);\n              const className = Location[location.id] === selected ? 'map-selected' : 'map-unselected';\n              return /*#__PURE__*/_jsxDEV(\"area\", {\n                alt: location.id,\n                onClick: handleClick,\n                href: location.id,\n                coords: scaledCoords.join(),\n                className: className,\n                shape: \"poly\"\n              }, location.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 25\n              }, this);\n            }\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `full-page-wrapper ${display ? '' : 'none'}`,\n      children: svgData.groupArray.map(area => {\n        if (selected !== null && area.coords) {\n          const selectedArea = getAreaDescription(selected);\n\n          if (selectedArea !== null && selectedArea.id === area.id) {\n            const header = selectedArea === null || selectedArea === void 0 ? void 0 : selectedArea.headerText;\n            const caption = selectedArea === null || selectedArea === void 0 ? void 0 : selectedArea.captionText;\n            const showButton = selectedArea === null || selectedArea === void 0 ? void 0 : selectedArea.showButton;\n            const headerColor = selectedArea === null || selectedArea === void 0 ? void 0 : selectedArea.headerColor;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"townbox-wrapper\",\n              children: /*#__PURE__*/_jsxDEV(Townbox, {\n                headerColor: headerColor,\n                headerText: header,\n                captionText: caption,\n                showButton: showButton,\n                close: onClose\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 21\n              }, this)\n            }, selectedArea.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 19\n            }, this);\n          }\n        }\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Map, \"oILqyrSxCQwmn4YWlP7PyqnzSVg=\");\n\n_c = Map;\nexport default Map;\n\nvar _c;\n\n$RefreshReg$(_c, \"Map\");","map":{"version":3,"sources":["/Users/junyap/foodbank/client/src/Components/Map/index.tsx"],"names":["React","useEffect","useRef","useState","Location","svgData","mapImg","descData","Townbox","Map","height","setHeight","elementRef","selected","onSelect","scale","setScale","display","changeDisplay","current","clientHeight","handleResize","mobileWidth","minStaticWidth","targetWidth","window","innerWidth","addEventListener","getAreaDescription","area","description","descriptionArray","id","onClose","onMapClick","handleClick","event","preventDefault","target","alt","minHeight","groupArray","map","location","coords","scaledCoords","coord","console","log","xtrans","className","join","selectedArea","header","headerText","caption","captionText","showButton","headerColor"],"mappings":"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","sourcesContent":["// naming conventions of items in svg = id of group in camelCase, image import name in PascalCase.\n// svg tree generated from dev/svgParse.py (super hacky atm)\n\nimport React, { useEffect, useRef, useState } from 'react'\nimport './index.css'\nimport { Location } from '../../lib/types'\nimport svgData from './svgImageData.json'\nimport mapImg from './assets/TuckerMap.jpg'\nimport descData from './assets/description.json'\nimport Townbox from '../Townbox'\nconst Map: React.FC = () => {\n  // Used because SVG does not scale properly without\n  const [height, setHeight] = useState(1)\n  const elementRef = useRef(null as null | HTMLDivElement)\n  const [selected, onSelect] = useState<Location | null>(null)\n  const [scale, setScale] = useState(1)\n  const [display, changeDisplay] = useState(false)\n  // const [townbox, setTownbox] = useState(<></>)\n  type HeaderColor = 'primary' | 'orange';\n  useEffect(() => {\n    if (elementRef?.current?.clientHeight) {\n      setHeight(elementRef?.current?.clientHeight)\n    }\n  }, []) //empty dependency array so it only runs once at render\n\n  useEffect(() => {\n    function handleResize() {\n      const mobileWidth = 2900\n      const minStaticWidth = 1170\n      const targetWidth = window.innerWidth > minStaticWidth ? window.innerWidth : mobileWidth\n      setScale(targetWidth/4961)\n    }\n    handleResize();\n    window.addEventListener('resize', handleResize)\n    },\n    []\n  )\n\n  // to get the area description given an area so you can actually use headers/captions\n  // returns null if such area doesn't exist in assets/description.json\n  const getAreaDescription = (area: Location) => {\n    for(const description of descData.descriptionArray) {\n      if (description.id === Location[area]) {\n        return description\n      }\n    }\n\n    return null\n  }\n  const onClose = () => {\n    onSelect(null) \n    changeDisplay(false)\n  }\n  const onMapClick = (area: Location) => {\n    selected === area ? onSelect(null) : onSelect(area)\n    changeDisplay(!display)\n  }\n  // eslint-disable-next-line\n  const handleClick = (event: any) => { //need to change this type\n    event.preventDefault()\n    const area = event.target.alt\n    onMapClick(Location[area as keyof typeof Location])\n  }\n\n\n  // Data can be made from dev/svgParse.py\n  return (\n    <div>\n    <div\n      ref={elementRef}\n      className='block w-full min-h-full items-stretch'\n      style={{minHeight:'900px'}}\n    >\n      {height === 0 ? null : (\n          <div className='svgrow'>\n            {\n              selected === null &&\n                <img\n                  src={mapImg}\n                  alt=\"Tucker Island Map\"\n                  className=\"map\"\n                  useMap=\"#tuckerislandmap\"\n                />\n            }\n\n            {\n              selected !== null &&\n                <img\n                  src={mapImg}\n                  alt=\"Tucker Island Map\"\n                  className=\"map map-inactive\"\n                  useMap=\"#tuckerislandmap\"\n                />\n            }\n\n            <map name=\"tuckerislandmap\">\n              {\n                svgData.groupArray.map(location => {\n                  if (location.coords){\n                    const scaledCoords = location.coords.map(coord => coord*scale)\n                    console.log(location.xtrans)\n                    const className = Location[location.id as keyof typeof Location] === selected\n                          ? 'map-selected'\n                          : 'map-unselected'\n                    return (\n                        <area \n                          key={location.id}\n                          alt={location.id}\n                          onClick={handleClick}\n                          href={location.id}\n                          coords={scaledCoords.join()}\n                          className={className}\n                          shape=\"poly\"\n                        />\n                    )\n                  }\n                })\n              }\n            </map>\n        </div>\n      )}\n    </div>\n\n    <div className={`full-page-wrapper ${display ? '': 'none'}`}>\n      {\n        svgData.groupArray.map(area => {\n          if (selected !== null && area.coords){\n            const selectedArea = getAreaDescription(selected)\n\n            if(selectedArea !== null && selectedArea.id === area.id) {\n              const header = selectedArea?.headerText\n              const caption = selectedArea?.captionText\n              const showButton = selectedArea?.showButton\n              \n              const headerColor:HeaderColor = selectedArea?.headerColor as HeaderColor;\n\n              return (\n                  <div key={selectedArea.id} className=\"townbox-wrapper\">\n                    <Townbox \n                      headerColor={headerColor}\n                      headerText={header}\n                      captionText={caption}\n                      showButton = {showButton}\n                      close={onClose}\n                    />\n                  </div>\n              )\n            }\n          }\n        })\n      }\n    </div>\n\n    </div>\n  )\n}\n\nexport default Map"]},"metadata":{},"sourceType":"module"}